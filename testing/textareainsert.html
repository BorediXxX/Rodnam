<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono" rel="stylesheet">
<script src="wordcount.js"></script>
<title>textinsert</title>
<meta charset="utf-8">
<meta author="jamesac">
<style>
	body {
		font-family:'Ubuntu',sans-serif;
	}
	.sidebar-wrapper{
		position:absolute;
		margin-left:-15px;
		height:100vh;
		margin-top:-30px;
		background-color: rgba(255,255,255,0.0);
	}
	#info-wrapper{
		pointer-events:none;
	}
	.sidebar-window{
		height:100%;
		width:40vw;
		background-color: #FFFFFF;
		float:left;
		overyflow-y:scroll;
		
		box-shadow: 10px 10px 5px #8e8e8e;
	}
	.sidebar-window::-webkit-scrollbar { 
		display: none; 
	}
	#info-window{
		pointer-events:all;
	}
	.sidebar-tab {
		height:50px;
		width:100px;
		text-align:center;
		background-color: #DDDDDD;
		float:left;
		line-height:50px;
		user-select:none;
	}
	.pointer-end-tab{
		width:0;
		height:0;
		border-top: 25px solid transparent;
		border-bottom: 25px solid transparent;
		float:left;
		border-left: 20px solid #DDDDDD;
	}
	#counter-pointer{
		margin-top:35vh;
	}
	#info-pointer{
		margin-top:50vh;
	}
	#counter-tab{
		margin-top:35vh;
	}
	#info-tab{
		margin-top:50vh;
		pointer-events:all;
	}
	.container{
		width:80%;
		margin:0 auto;
		margin-top:30px;
	}
	.window-container{
		height:90%;
		width:90%;
		margin:0 auto;
		padding:15px;
		padding-top:30px;
		overflow-y:scroll;
	}
	.window-container::-webkit-scrollbar { 
		display: none; 
	}
	.header-div{
		width:100%;
		text-align:center;
	}
	.sidebar-head{
		font-size:23px;
	}
	#stat-div{
		width:90%;
		height:90%;
		margin:0 auto;
		margin-top:30px;
		padding:15px;
		overflow-y:scroll;
		overflow-x:scroll;
		border:1px solid black;
		background-color:#fbfbfb;
	}
	#stat {
		font-family: 'Ubuntu Mono', sans-serif;
		font-size:15px;
		white-space:pre;
	}
	#form-submit-div{
		width:90%;
		margin:0 auto;
		margin-top:30px;
		margin-bottom:40px;
		padding: 15px;
		border-bottom:1px solid gray;
	}
	.row{
		width:100%;
		height:70px;
	}
	.col{
		margin:-1px;
		width:50%;
		float:left;
	}
	.col input, label,select{
		display:block;
		font-size:18px;
		font-family:'Ubuntu',sans-serif;
		margin:0 auto;
	}
	.col label{
		padding-left:10px;
	}
	.col input, select{
		width:95%;
		line-height:40px;
		height:40px;
	}
	input{
		padding:10px 10px;
	}
	.btn{
		height:40px;
		width:80px;
		font-size:20px;
		margin-top:10px;
		border:none;
		font-family:'Ubuntu',sans-serif;
		background-color: #e7e7e7;
	}
	#submit-button{
		display:block;
		margin:0 auto;
	}
	ul {
		list-style-type:none;
		padding:0;
		margin:0;
	}
	li{
		float:left;
		border:1px solid black;
		display:inline-block;
	}
	li a, .dropbtn{
		display:inline-block;
		text-align:center;
		padding:14px 16px;
		text-decoration:none;
		color:black;
		background-color:#EEEEEE;
		user-select: none;
	}
	li a:hover, .dropdown:hover .dropbtn{
		background-color:#cccccc;
	}
	li.dropdown{
		display:inline-block;
	}
	.dropdown-content{
		display:none;
		position:absolute;
		background-color:#f1f1f1;
		min-width:120px;
		box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	}
	
	#header-content{
		border:none;
		padding-bottom:-5px;
	}
	
	#headers-div{
		height:50px;
		margin-bottom:1px;
		white-space:nowrap;
	}
	
	.dropdown-content a{
		color:black;
		text-decoration:none;
		padding:12px 16px;
		display:block;
		text-align:left
	}
	.dropdown-content a:hover{
		background-color:#f1f178;
	}
	.dropdown:hover .dropdown-content{
		display:block;
	}
	#text_area{
		font-family:'Ubuntu Mono',monospace;
		font-size:16px;
		width:100%;
		height:75%;
		resize:none;
		margin-top:-5px;
		padding:20px;
	}
</style>
</head>
<body>
<div class="sidebar-wrapper" id="counter-wrapper">
	<div class="sidebar-window" id="counter-window">
		<div class="window-container">
			<div class="header-div">
				<span class="sidebar-head" id="counter-head">Word Count</span>
			</div>
			<div id="stat-div">
				<span id="stat"></span>
			</div>
		</div>
	</div>
	<div class="sidebar-tab" id="counter-tab">0</div><div id="counter-pointer" class="pointer-end-tab"></div>	
</div>
<div class="sidebar-wrapper" id="info-wrapper"><!--none-->
	<div class="sidebar-window" id="info-window"><!--default-->
		<div class="window-container">
			<div class="header-div">
				<span class="sidebar-head" id="info-head">Note Info</span>
			</div>
			<div id="form-submit-div">
				<form id="submit-note">
					<div class="row">
						<div class="col">
							<label for="title-input">Title</label>
							<input id="title-input" type="text"></input>
						</div>
						<div class="col">
							<label for="section-input">Chapter/ Section</label>
							<input id="section-input" type="text">
						</div>
					</div>
					<div class="row">
						<div class="col">
							<label for="class-input">Class</label>
							<select id="class-input">
								<option value="class">Class</option>
							</select>
						</div>
						<div class="col">
							<label for="teacher-input">Teacher</label>
							<select id="teacher-input">
								<option value="teacher">Teacher</option>
							</select>
						</div>
					</div>
					<div class="form-row">
						<button type="submit" id="submit-button" class="btn" value="note-submit">Create</button>
					</div>
				</form>
			</div>
			<div class="header-div">
				<span class="sidebar-head" id="settings-head">Settings</span>
			</div>
			<div style="height:800px;border:1px solid black;"></div>
		</div>
	</div>
	<div class="sidebar-tab" id="info-tab">General</div><div id="info-pointer" class="pointer-end-tab"></div><!--default-->
</div>
<div class="container">
	<h1>Create</h1><hr>
	<div id="navbar">
		<ul id="format_bar">
			<div id="header-outer-ctrl">
				<li id="headers-toggle" class="dropdown">
					<a href="#" class="dropbtn">Headers</a></li>
				<li id="header-content">
					<div class="headers-div" id="headers-div"><ul>
						<li class="header-insert"><a id="header1" onclick="insertForm('\n\n# ')" href="#">H1</a></li>
						<li class="header-insert"><a id="header2" onclick="insertForm('\n\n## ')" href="#">H2</a></li>
						<li class="header-insert"><a id="header3" onclick="insertForm('\n\n### ')" href="#">H3</a></li>
						<li class="header-insert"><a id="header4" onclick="insertForm('\n\n#### ')" href="#">H4</a></li>
						<li class="header-insert"><a id="header5" onclick="insertForm('\n\n##### ')" href="#">H5</a></li>
						<li class="header-insert"><a id="header6" onclick="insertForm('\n\n###### ')" href="#">H6</a></li>
					</ul></div>
				</li>
			</div>
			<li><a id="bold" onclick="insertForm('*bold*')">Bold</a></li>
			<li><a id="bullet" onclick="insertForm('\n\n- ')">Bullet</a></li>
			<li><a id="list" onclick="insertForm('\n\n1. ')">List</a></li>
			<li><a id="quote" onclick="insertForm('\n\n> ')">Quote</a></li>
			<li><a id="link" onclick="insertLink()">Link</a></li>
			<li><a id="inline-code" onclick="insertForm('`code`')">Inline Code</a></li>
			<li><a id="code-block" onclick="insertForm('\n\n\    codeblocks are indented by 4 spaces')">Code Block</a></li>
		</ul>
	</div>
	<textarea id="text_area" form="submit-note"></textarea>
</div>
<script>
	function insertForm(markdown){
		var $txt = jQuery("#text_area");
        var caretPos = $txt[0].selectionStart;
        var textAreaTxt = $txt.val();
        var txtToAdd = markdown;
        $txt.val(textAreaTxt.substring(0, caretPos) + txtToAdd + textAreaTxt.substring(caretPos) );
	}
	function insertLink(){
		var url = prompt("URL (https://...)");
		var hypertext = prompt("Hyperlink");
		insertForm(" [" + hypertext + "](" + url + ") ");
	}
	$("#text_area").keydown(function(e) {
		if(e.keyCode === 9) { // tab was pressed
			// get caret position/selection
			var start = this.selectionStart;
				end = this.selectionEnd;

			var $this = $(this);

			// set textarea value to: text before caret + tab + text after caret
			$this.val($this.val().substring(0, start)
						+ "\t"
						+ $this.val().substring(end));

			// put caret at right position again
			this.selectionStart = this.selectionEnd = start + 1;

			// prevent the focus lose
			return false;
		}
	});
	$(document).ready(function(){
		/*
		$(".header-insert").hide();
		$("#headers-toggle, .header-insert").mouseenter(function(){
			$( ".header-insert" ).first().show(150, function showNext() {
				$( this ).next( ".header-insert" ).show(150, showNext );
			});
		})
		
		$("#headers-toggle, .header-insert").mouseleave( function() {
			if ($('.header-insert:hover').length == 0) {
				$( ".header-insert" ).first().hide(150, function showNext() {
					$( this ).next( ".header-insert" ).hide(150, showNext );
				});
			}
		});
		*/
		var sidebar_out = false;
		function toggleSidebar(){
			if(!sidebar_out){
				$("body").css({"background-color":"#dbdbdb"});
				$("#text_area").css({"background-color":"#dbdbdb"});
				$("li a").css({"background-color":"#adadad"});
				$(".sidebar-tab").css({"background-color":"#ffffff"});
				$(".pointer-end-tab").css({"border-left":"20px solid #ffffff"});
				sidebar_out = true;
			}else{
				$("body").css({"background-color":"#ffffff"});
				$("#text_area").css({"background-color":"#ffffff"});
				$("li a").css({"background-color":"#eeeeee"});
				$(".sidebar-tab").css({"background-color":"#dddddd"});
				$(".pointer-end-tab").css({"border-left":"20px solid #dddddd"});
				sidebar_out = false;
			}
		}
		
		$(".header-insert").animate({width:'toggle'},50);
		$("#header-outer-ctrl").mouseenter(function(){
			$( ".header-insert" ).first().animate({width:'toggle'},150,function showNext() {
				$( this ).next( ".header-insert" ).animate({width:'toggle'},150, showNext );
			});
		})
		$("#header-outer-ctrl").mouseleave(function(){
			$( ".header-insert" ).first().animate({width:'toggle'},150,function showNext() {
				$( this ).next( ".header-insert" ).animate({width:'toggle'},150, showNext );
			});
		})
		/*
		$("#headers-div").mouseleave( function() {
			if ($("#headers-toggle").length != 0) {
				$("#headers-div").animate({width:'toggle'},300);
			}
		});*/
		$(".sidebar-window").each(function() {
			$(this).animate({width:'toggle'},50);
		});
		
		$("#counter-tab").click(function(){
			$(this).parent().find(".sidebar-window").animate({width:'toggle'},200).animate({width:'-=40px'},80).animate({width:'+=40px'},60).animate({width:'-=20px'},40).animate({width:'+=20px'},10);
			$("#info-tab").animate({opacity: 'toggle'},60);
			toggleSidebar();
		});
		$("#info-tab").click(function(){
			$(this).parent().find(".sidebar-window").animate({width:'toggle'},200).animate({width:'-=40px'},80).animate({width:'+=40px'},60).animate({width:'-=20px'},40).animate({width:'+=20px'},10);
			toggleSidebar();
		});
		
		$("#text_area").keyup(function(){
			countAll();
		});
	})
</script>
</body>